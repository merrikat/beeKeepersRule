<!DOCTYPE html>
<html>
	<head>
		<title>The Beekeeper's rule</title>
		<script>
		function getFormattedDate(date) {
		var year = date.getFullYear();
		var month = (1 + date.getMonth()).toString();
		month = month.length > 1 ? month : '0' + month;
		var day = date.getDate().toString();
		day = day.length > 1 ? day : '0' + day;
		return day + '/' + month + '/' + year;
		}
		function addDays(date, days) {
		var result = new Date(date);
		result.setDate(result.getDate() + days);
		return getFormattedDate(result);
		}
		function myFunction() {
		var startDate = document.getElementById("selectDate").value;
		var e = document.getElementById("selectBeeType");
		var beeType = e.options[e.selectedIndex].value;
		if (beeType == "Worker"){
			var eggHatchDate = addDays(startDate,3);
			var cellCappedDate = addDays(startDate,8);
			var beeEmergeDate = addDays(startDate,21);
			var foragingDate = addDays(startDate,42);
			var foragingDateLow = addDays(startDate,42-7);
			var foragingDateHigh = addDays(startDate,42+7);
		}
		else if (beeType == "Queen"){
			var eggHatchDate = addDays(startDate,3);
			var cellCappedDate = addDays(startDate,8);
			var beeEmergeDate = addDays(startDate,16);
			var matedDate = addDays(startDate,22);
			var layingDate = addDays(startDate,28);
			var layingDateLow = addDays(startDate,28-5);
			var layingDateHigh = addDays(startDate,28+5);
		}
		else if (beeType == "Drone"){
			var eggHatchDate = addDays(startDate,3);
			var cellCappedDate = addDays(startDate,10);
			var beeEmergeDate = addDays(startDate,24);
			var visitDCADate = addDays(startDate,38);
			var visitDCADateLow = addDays(startDate,38-5);
			var visitDCADateHigh = addDays(startDate,38+5);
		}
		if (typeof eggHatchDate !== 'undefined') {
		document.getElementById("eggHatchOutput").innerHTML = "Egg hatched on "+eggHatchDate;
		}
		if (typeof cellCappedDate !== 'undefined') {
		document.getElementById("cellCappedOutput").innerHTML = "Cell capped on "+cellCappedDate;
		}
		if (typeof beeEmergeDate !== 'undefined') {
		document.getElementById("beeEmergeOutput").innerHTML = "Bee emerged on "+beeEmergeDate;
		}
		if (typeof matedDate !== 'undefined') {
		document.getElementById("matedOutput").innerHTML = "Mated on "+matedDate;
		}
		if (typeof layingDate !== 'undefined') {
		document.getElementById("layingOutput").innerHTML = "Laying on "+layingDate +" ("+layingDateLow+" to "+layingDateHigh+")";
		}	
		if (typeof foragingDate !== 'undefined') {
		document.getElementById("foragingOutput").innerHTML = "Foraging on "+foragingDate +" ("+foragingDateLow+" to "+foragingDateHigh+")";
		}
		if (typeof visitDCADate !== 'undefined') {
		document.getElementById("visitDCAOutput").innerHTML = "Visiting DCA on "+visitDCADate +"("+visitDCADateLow+" to "+visitDCADateHigh+")";
		}					
		}
		</script>
		
	</head>
	<body>
		<h1>The Beekeeper's Rule</h1>
		<p>Select a start date and bee type</p>
		<input type="date" id="selectDate" value="2014-02-09">
		<select id="selectBeeType">
			<option value="Worker">Worker</option>
			<option value="Queen">Queen</option>
			<option value="Drone">Drone</option>
		</select>
		<button onclick="myFunction()">Calculate dates</button>
		<p id="eggHatchOutput"></p>
		<p id="cellCappedOutput"></p>
		<p id="beeEmergeOutput"></p>
		<p id="matedOutput"></p>
		<p id="layingOutput"></p>
		<p id="foragingOutput"></p>
		<p id="visitDCAOutput"></p>
		<table>
		</table>
	</body>
</html>